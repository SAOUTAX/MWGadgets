$(function(){if(!mw.config.get("wgIsArticle")||"wikitext"!==mw.config.get("wgPageContentModel"))return;const M={loading:"加载中...",loadingFailed:"( ﾟ∀。)加载失败",editing:"修改中...",edited:"修改成功！正在刷新页面...",editFailed:"( ﾟ∀。)修改失败",disambig:"消歧义"};"zh-hant"===mw.config.get().wgUserLanguage&&(M.loading="加載中...",M.loadingFailed="( ﾟ∀。)加載失敗",M.editing="修改中...",M.edited="修改成功！正在刷新頁面...",M.editFailed="( ﾟ∀。)修改失敗",M.disambig="消歧義"),$("body").append("<style>\n    a.mw-disambig.mw-disambig { color: #ff8921; }\n    a.mw-disambig.mw-disambig:visited { color: #d2711b; }\n    a.mw-redirect.mw-disambig { color: #ff6421; }\n    a.mw-redirect.mw-disambig:visited { color: #d2521b; }\n    div.disambig-box {\n      width: 200px;\n      max-height: 220px;\n      overflow-y: scroll;\n      border-radius: 2px;\n      box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px;\n      -webkit-box-shadow: rgba(0, 0, 0, 0.156863) 0px 3px 10px, rgba(0, 0, 0, 0.227451) 0px 3px 10px;\n      margin: 0;\n      padding: 0;\n      color: #000;\n      background: #FFF;\n      position: absolute;\n      font-size: 14px;\n      font-style: normal;\n      font-weight: normal;\n      text-decoration: none;\n      text-align: left;\n      display: none;\n      transition: all 500ms cubic-bezier(.23, 1, .32, 1) 0ms;\n      z-index: 999;\n    }\n    .disambig-box ul.disambig-ul {\n      list-style: none;\n      padding: 0 !important;\n      margin: 0 !important;\n    }\n    .disambig-box li {\n      color: #000 !important;\n      padding: 2px 10px;\n      transition: all 500ms cubic-bezier(.23, 1, .32, 1) 0ms;\n    }\n    .disambig-box li:hover { background: #F0F0F0; }\n    .disambig-box li a { text-decoration: none; }\n    .icon {\n      margin-left: 5px;\n      width: 20px;\n      opacity: .7;\n      transition: all 500ms cubic-bezier(.23, 1, .32, 1) 0ms;\n    }\n    .icon:hover { opacity: 1; }\n    </style>");const i=M=>decodeURI($(M).attr("href").substring(1)).replace("%2F","/"),z=M=>new Promise(i=>{(new mw.Api).get({action:"parse",page:M,redirects:!0,prop:"wikitext",format:"json"}).done(M=>{i(M.parse.wikitext["*"])}).fail((M,z,N)=>{i(N)})}),N=function(){let M={};return $(".mw-disambig").each(function(){const z=i(this);M[z]=M[z]+1||0}),M}();$(".mw-disambig").each(async function(){const j=i(this),g=$(this).text();let t=j.split(".").join(""),a=$(`#${t}`).length;a>0&&(t=t+a+1);const n=0===N[j]?'<img class="icon" alt="edit" src="data:image/svg+xml;base64,PHN2ZyB0PSIxNjMyMTExNDY4NTg2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMzNTciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNODI3LjczMzMzMyAzMTMuMTczMzMzTDcxMC44MjY2NjcgMTk2LjI2NjY2N0E4NS4zMzMzMzMgODUuMzMzMzMzIDAgMCAwIDU5Ny4zMzMzMzMgMTkzLjI4bC0zODQgMzg0YTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDAtMjQuMzIgNTEuNjI2NjY3TDE3MC42NjY2NjcgODA2LjgyNjY2N2E0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwIDEyLjM3MzMzMyAzNC4xMzMzMzNBNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMCAyMTMuMzMzMzMzIDg1My4zMzMzMzNoMy44NGwxNzcuOTItMTYuMjEzMzMzYTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDAgNTEuNjI2NjY3LTI0LjMybDM4NC0zODRhODEuOTIgODEuOTIgMCAwIDAtMi45ODY2NjctMTE1LjYyNjY2N3pNNjgyLjY2NjY2NyA0NTUuNjhMNTY4LjMyIDM0MS4zMzMzMzNsODMuMi04NS4zMzMzMzNMNzY4IDM3Mi40OHoiIHAtaWQ9IjMzNTgiPjwvcGF0aD48L3N2Zz4=">':'<img class="icon" alt="edit_all" src="data:image/svg+xml;base64,PHN2ZyB0PSIxNjMyMTExNDY4NTg2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjMzNTciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNODI3LjczMzMzMyAzMTMuMTczMzMzTDcxMC44MjY2NjcgMTk2LjI2NjY2N0E4NS4zMzMzMzMgODUuMzMzMzMzIDAgMCAwIDU5Ny4zMzMzMzMgMTkzLjI4bC0zODQgMzg0YTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDAtMjQuMzIgNTEuNjI2NjY3TDE3MC42NjY2NjcgODA2LjgyNjY2N2E0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwIDEyLjM3MzMzMyAzNC4xMzMzMzNBNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMCAyMTMuMzMzMzMzIDg1My4zMzMzMzNoMy44NGwxNzcuOTItMTYuMjEzMzMzYTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDAgNTEuNjI2NjY3LTI0LjMybDM4NC0zODRhODEuOTIgODEuOTIgMCAwIDAtMi45ODY2NjctMTE1LjYyNjY2N3pNNjgyLjY2NjY2NyA0NTUuNjhMNTY4LjMyIDM0MS4zMzMzMzNsODMuMi04NS4zMzMzMzNMNzY4IDM3Mi40OHoiIHAtaWQ9IjMzNTgiIGZpbGw9IiNkODFlMDYiPjwvcGF0aD48L3N2Zz4=">',e=M=>{$(`#${t} ul`).empty().append(`<li>${M}</li>`)};$(this).after($("<div>",{id:t,class:"disambig-box"}).on("mouseleave",()=>{$(`#${t}`).hide(150,"swing")}).append('<ul class="disambig-ul">'),$("<sup>").append($("<a>",{href:"javascript:void(0)",text:"?",class:t}))),$(`a.${t}`).on("mouseenter",async()=>{$(`#${t}`).css({left:$(this).position().left+10,top:$(this).position().top+16}),e(M.loading),$(`#${t}`).show(150,"swing");let i=await z(j);if(i=i.split("\n").map(M=>M.substring(0,M.indexOf("——"))).map(M=>M.match(/\[\[/g)&&!M.match(/\[\[File:/gi)?M.split("[[")[1].split("]]")[0]:M.match(/\{\{(dis|dl)\|/gi)?M.split(/\{\{(dis|dl)\|/gi)[1]:M.match(/\{\{coloredlink\|/gi)?M.split(/\{\{coloredlink\|/gi)[1]:void 0).filter(M=>M).map(M=>M.split("|")[0]),$(`#${t} ul`).empty(),!i[0])return e(M.loadingFailed);for(const N of i){let i=N.replace('"',"&quot;");$(`#${t} ul`).append(`<li id="${i}">${N}<a href="/${i}"><img class="icon" alt="link" src="data:image/svg+xml;base64,PHN2ZyB0PSIxNjMyMTExNzE4MDc5IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM1NjgiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNMzQxLjMzMzMzMyA1MTJhNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMCA0Mi42NjY2NjcgNDIuNjY2NjY3aDI1NmE0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwIDAtODUuMzMzMzM0SDM4NGE0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwLTQyLjY2NjY2NyA0Mi42NjY2Njd6IiBwLWlkPSIzNTY5Ij48L3BhdGg+PHBhdGggZD0iTTM4NCA2ODIuNjY2NjY3SDMwNy42MjY2NjdBMTc2LjIxMzMzMyAxNzYuMjEzMzMzIDAgMCAxIDEyOCA1MjcuNzg2NjY3IDE3MC42NjY2NjcgMTcwLjY2NjY2NyAwIDAgMSAyOTguNjY2NjY3IDM0MS4zMzMzMzNoODUuMzMzMzMzYTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDAgMC04NS4zMzMzMzNIMzA3LjYyNjY2N2EyNjIuNCAyNjIuNCAwIDAgMC0yNjIuODI2NjY3IDIyMi4yOTMzMzNBMjU2IDI1NiAwIDAgMCAyOTguNjY2NjY3IDc2OGg4NS4zMzMzMzNhNDIuNjY2NjY3IDQyLjY2NjY2NyAwIDAgMCAwLTg1LjMzMzMzM3pNOTgxLjMzMzMzMyA0NzkuNTczMzMzQTI2Mi44MjY2NjcgMjYyLjgyNjY2NyAwIDAgMCA3MTUuMDkzMzMzIDI1NmgtNjQuNDI2NjY2QzYxNi4xMDY2NjcgMjU2IDU5Ny4zMzMzMzMgMjc1LjIgNTk3LjMzMzMzMyAyOTguNjY2NjY3YTQyLjY2NjY2NyA0Mi42NjY2NjcgMCAwIDAgNDIuNjY2NjY3IDQyLjY2NjY2Nmg3Ni4zNzMzMzNBMTc2LjIxMzMzMyAxNzYuMjEzMzMzIDAgMCAxIDg5NiA0OTYuMjEzMzMzIDE3MC42NjY2NjcgMTcwLjY2NjY2NyAwIDAgMSA3MjUuMzMzMzMzIDY4Mi42NjY2NjdoLTg1LjMzMzMzM2E0Mi42NjY2NjcgNDIuNjY2NjY3IDAgMCAwIDAgODUuMzMzMzMzaDg1LjMzMzMzM2EyNTYgMjU2IDAgMCAwIDI1Ni0yODguNDI2NjY3eiIgcC1pZD0iMzU3MCI+PC9wYXRoPjwvc3ZnPg=="></a><a>${n}</a></li>`),document.getElementById(N).lastChild.addEventListener("click",async()=>{e(M.editing);let i=mw.config.get().wgPageName,t=await z(i),a=`[[${j}]]`;j!==g&&(a=`[[${j}|${g}]]`),(new mw.Api).postWithToken("csrf",{action:"edit",text:t.replaceAll(a,`[[${N}|${g}]]`),title:i,minor:!0,nocreate:!0,summary:`${M.disambig}：[[${j}]]→[[${N}]]`,tags:"Automation tool",errorformat:"plaintext"}).done(i=>{e(M.edited),window.location.reload()}).fail((i,z,N)=>{e(`${M.editFailed}（${N}）`)})})}})})});
//# sourceMappingURL=DisambigHelper.min.js.map